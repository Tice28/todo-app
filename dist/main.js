(()=>{"use strict";function t(){const t=JSON.parse(localStorage.getItem("catList"));document.getElementById("content").innerHTML='\n    <form action="" method="get" onSubmit="event.preventDefault();">\n    <h1>New Task</h1>\n    <label for="task-title">Title</label>\n    <input type="text" name="title" id="task-title" />\n    <label for="task-prio">Priority</label>\n    <input list="priority-list" name="prio" id="task-prio" pattern="[1-3]{1}"/>\n    <label for="task-date">Due Date</label>\n    <input type="date" name="date" id="task-date" />\n    <label for="task-category">Category</label>\n    <input id="task-category" list="category-list" />\n    <datalist id="category-list">\n    </datalist>\n    <datalist id="priority-list">\n      <option value="1">High</option>\n      <option value="2">Normal</option>\n      <option value="3">Low</option>\n    </datalist>\n    <button type="submit" class="submitBtn" id="addTaskSubmit">Add</button>\n    <input type="button" class="cancelBtn" value="cancel" id="addTaskCancel"/>\n  </form>';const e=document.getElementById("category-list");for(let n=0;n<t.length;n++){const a=document.createElement("option");a.value=JSON.stringify(t[n]),a.textContent=t[n].title,e.appendChild(a)}document.getElementById("addTaskSubmit").addEventListener("click",(()=>{!function(){const t=document.getElementById("task-title").value,e=document.getElementById("task-prio").value,n=document.getElementById("task-date").value,a=document.getElementById("task-category").value;let l=JSON.parse(localStorage.getItem("taskList"));null==l?localStorage.setItem("taskList",JSON.stringify([new s(t,e,n,a)])):(l.push(new s(t,e,n,a)),localStorage.setItem("taskList",JSON.stringify(l)))}(),n()})),document.getElementById("addTaskCancel").addEventListener("click",n)}function e(){document.getElementById("content").innerHTML='\n  <form action="" method="get" onSubmit="event.preventDefault();">\n  <h1>New Category</h1>\n  <label for="cat-title">Title</label>\n  <input type="text" name="title" id="cat-title" required/>\n  <label for="cat-color">Category Color</label>\n  <input type="color" name="color" id="cat-color" />\n  <label for="cat-tag">Category Tag</label>\n  <div class="tag-display">\n  <img id="tag-image" src="none" alt="star" onerror="this.style.display=\'none\'"/>\n  <input id="cat-tag" list="tags-list" placeholder="Choose a tag" required/>\n  </div>\n  <datalist id="tags-list">\n    <option value="Star">Important</option>\n  </datalist>\n  <button type="submit" class="submitBtn" id="addCatSubmit">Add</button>\n  <input type="button" class="cancelBtn" id="addCatCancel" value="cancel" />\n  </form>';const t=document.getElementById("tag-image"),e=document.getElementById("cat-tag");e.addEventListener("change",(()=>{c(t,`${e.value.toLowerCase()}.svg`)})),document.getElementById("addCatSubmit").addEventListener("click",(()=>{!function(){const t=document.getElementById("cat-title").value,e=document.getElementById("cat-color").value,n=document.getElementById("cat-tag").value;let a=JSON.parse(localStorage.getItem("catList"));null==a?localStorage.setItem("catList",JSON.stringify([new r(t,e,`${n.toLowerCase()}`)])):(a.push(new r(t,e,`${n.toLowerCase()}`)),localStorage.setItem("catList",JSON.stringify(a)))}(),n()})),document.getElementById("addCatCancel").addEventListener("click",l)}function n(){document.getElementById("select-dropdown").value="all",d();const t=document.getElementById("content");let e=JSON.parse(localStorage.getItem("taskList"));if(e&&e.length>0){let a=0;for(;a<e.length;){if(e[a].hasOwnProperty("isComplete")&&!0!==e[a].isComplete){let l=document.createElement("div"),i=e[a],d=document.createElement("button");d.innerText,d.textContent="Modify",d.addEventListener("click",(()=>{o(i)}));let c=document.createElement("button");c.innerText,c.textContent="Complete",c.addEventListener("click",p);let s=document.createElement("button");s.innerText,s.textContent="Delete",s.addEventListener("click",(()=>{m(s),n()})),l.innerHTML=`<img src="${JSON.parse(e[a].category).tag}" alt="category tag"/> <div class="title">${e[a].title}</div>\n          ${e[a].priority} ${e[a].date}`,l.appendChild(d),l.appendChild(c),l.appendChild(s),l.classList.add("task"),t.appendChild(l)}a++}}else document.getElementById("content").innerHTML="<h1>No tasks! Get started by going to the 'Add Task' page."}function a(){d();let t=JSON.parse(localStorage.getItem("taskList"));const e=document.getElementById("content");let n=document.createElement("button");if(n.innerText,n.textContent="Delete",n.addEventListener("click",(()=>{m(n),a()})),t&&t.length>0){let a=0;for(;a<t.length;){if(1==t[a].isComplete){let l=document.createElement("div");l.innerHTML=`<img src="${JSON.parse(t[a].category).tag}" alt="category tag"/> <div class="title">${t[a].title}</div>\n        ${t[a].priority} ${t[a].date}`,l.classList.add("task"),l.appendChild(n),e.appendChild(l)}a++}}else document.getElementById("content").innerHTML="<h1>No completed tasks! Finish a task to have it display here!"}function l(){document.getElementById("select-dropdown").value="categories",d();let t=JSON.parse(localStorage.getItem("catList"));const e=document.getElementById("content");if(t&&t.length>0){let n=0;for(;n<t.length;){let a=document.createElement("div"),o=document.createElement("img"),i=document.createElement("div"),d=document.createElement("button");d.innerText,d.textContent="Delete",d.addEventListener("click",(()=>{u(d),l()})),c(o,`${t[n].tag}`),i.innerHTML=`\n      <div class="title">${t[n].title}</div> ${t[n].color}`,a.classList.add("category"),a.appendChild(o),a.appendChild(i),a.appendChild(d),e.appendChild(a),n++}}else document.getElementById("content").innerHTML="<h1>No Categories! Get started by going to the 'Add Category' page."}function o(t){document.getElementById("mod-task-title").value=t.title,document.getElementById("mod-task-prio"),document.getElementById("mod-task-date").value=t.date,document.getElementById("mod-task-category");const e=JSON.parse(localStorage.getItem("catList")),n=document.getElementById("mod-category-list");for(let t=0;t<e.length;t++){const a=document.createElement("option");a.value=JSON.stringify(e[t]),a.textContent=e[t].title,n.appendChild(a)}document.getElementById("modify-form").style.visibility="visible"}function i(t){let e=t.childElementCount;for(let n=0;n<e;n++)t.removeChild(t.firstElementChild)}function d(){document.getElementById("content").innerHTML=""}function c(t,e){console.log(t.src),t.src=e,t.style.display="block"}class s{constructor(t,e,n,a){this.title=t,this.priority=e,this.date=n,this.category=a,this.isComplete=!1}}class r{constructor(t,e,n){this.title=t,this.color=e,this.tag=`${n}.svg`}}function m(t){let e=JSON.parse(localStorage.getItem("taskList"));for(const n in e)e[n].title==t.parentNode.querySelector(".title").textContent&&e.splice(n,1);t.parentNode.remove(),localStorage.setItem("taskList",JSON.stringify(e))}function u(t){let e=JSON.parse(localStorage.getItem("catList"));for(const n in e)e[n].title==t.parentNode.querySelector(".title").textContent&&e.splice(n,1);t.parentNode.remove(),localStorage.setItem("catList",JSON.stringify(e))}function g(t){return new s(t[0].value,t[1].value,t[2].value,t[3].value)}function p(t){let e=JSON.parse(localStorage.getItem("taskList"));for(const n in e)e[n].title==t.target.parentNode.querySelector(".title").textContent&&(e[n].isComplete=!0);localStorage.setItem("taskList",JSON.stringify(e)),n()}window.onload=n();const y=document.getElementById("navAll"),v=document.getElementById("navAddTask"),E=document.getElementById("navAddCat"),k=document.getElementById("navComplete"),I=document.getElementById("navCategories"),f=document.getElementById("select-dropdown"),h=document.getElementById("mod-update");h.addEventListener("click",(()=>function(t){let e=JSON.parse(localStorage.getItem("taskList"));const a=t.parentNode.querySelectorAll("input");for(const n in e)e[n].title==t.parentNode.querySelector("#mod-task-title").value&&(console.log(g(a)),e[n]=g(a));localStorage.setItem("taskList",JSON.stringify(e)),i(document.getElementById("mod-category-list")),n()}(h))),document.getElementById("mod-cancel").addEventListener("click",(function(){document.getElementById("mod-task-title").value=null,document.getElementById("mod-task-prio").value=null,document.getElementById("mod-task-date").value=null,document.getElementById("mod-task-category").value=null,i(document.getElementById("mod-category-list")),document.getElementById("modify-form").style.visibility="hidden"})),y.addEventListener("click",(()=>{n(),f.value="all"})),v.addEventListener("click",(()=>{t(),f.value="addTask"})),E.addEventListener("click",(()=>{e(),f.value="addCat"})),k.addEventListener("click",(()=>{a(),f.value="completed"})),I.addEventListener("click",(()=>{l(),f.value="categories"})),f.addEventListener("change",(()=>{switch(f.value){case"addTask":t();break;case"all":n();break;case"addCat":e();break;case"completed":a();break;case"categories":l()}}))})();