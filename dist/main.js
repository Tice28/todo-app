(()=>{"use strict";function e(){const e=JSON.parse(localStorage.getItem("catList"));document.getElementById("content").innerHTML='\n    <form action="" method="get" onSubmit="event.preventDefault();">\n    <h1>New Task</h1>\n    <label for="task-title">Title</label>\n    <input type="text" name="title" id="task-title" />\n    <label for="task-prio">Priority</label>\n    <select name="prio" id="task-prio">\n      <option value="High">High</option>\n      <option value="Normal">Normal</option>\n      <option value="Low">Low</option>\n    <select/>\n    <label for="task-date">Due Date</label>\n    <input type="date" name="date" id="task-date" />\n    <label for="task-category">Category</label>\n    <select id="task-category"><select/>\n    <button type="submit" class="submitBtn" id="addTaskSubmit">Add</button>\n    <input type="button" class="cancelBtn" value="cancel" id="addTaskCancel"/>\n  </form>';const t=document.getElementById("task-category");for(let n=0;n<e.length;n++){const a=document.createElement("option");a.value=JSON.stringify(e[n]),a.textContent=e[n].title,t.appendChild(a)}document.getElementById("addTaskSubmit").addEventListener("click",(()=>{!function(){const e=document.getElementById("task-title").value,t=document.getElementById("task-prio").value,n=document.getElementById("task-date").value,a=document.getElementById("task-category").value;let o=JSON.parse(localStorage.getItem("taskList"));null==o?localStorage.setItem("taskList",JSON.stringify([new s(e,t,n,a)])):(o.push(new s(e,t,n,a)),localStorage.setItem("taskList",JSON.stringify(o)))}(),n()})),document.getElementById("addTaskCancel").addEventListener("click",n)}function t(){document.getElementById("content").innerHTML='\n  <form action="" method="get" onSubmit="event.preventDefault();">\n  <h1>New Category</h1>\n  <label for="cat-title">Title</label>\n  <input type="text" name="title" id="cat-title" required/>\n  <label for="cat-color">Category Color</label>\n  <input type="color" name="color" id="cat-color" />\n  <label for="cat-tag">Category Tag</label>\n  <div class="tag-display">\n  <img id="tag-image" src="star.svg" alt="star" onerror="this.style.display=\'none\'"/>\n  <select id="cat-tag" list="tags-list" placeholder="Choose a tag" required>\n    <option value="Star">Important</option>\n    <option value="Work">Work</option>\n    <option value="Home">Home</option>\n    <option value="School">School</option>\n  <select/>\n  </div>\n  <button type="submit" class="submitBtn" id="addCatSubmit">Add</button>\n  <input type="button" class="cancelBtn" id="addCatCancel" value="cancel" />\n  </form>';const e=document.getElementById("tag-image"),t=document.getElementById("cat-tag");t.addEventListener("change",(()=>{c(e,`${t.value.toLowerCase()}.svg`)})),document.getElementById("addCatSubmit").addEventListener("click",(()=>{!function(){const e=document.getElementById("cat-title").value,t=document.getElementById("cat-color").value,n=document.getElementById("cat-tag").value;let a=JSON.parse(localStorage.getItem("catList"));null==a?localStorage.setItem("catList",JSON.stringify([new r(e,t,`${n.toLowerCase()}`)])):(a.push(new r(e,t,`${n.toLowerCase()}`)),localStorage.setItem("catList",JSON.stringify(a)))}(),n()})),document.getElementById("addCatCancel").addEventListener("click",o)}function n(){document.getElementById("select-dropdown").value="all",d();const e=document.getElementById("content");let t=JSON.parse(localStorage.getItem("taskList"));if(t&&t.length>0){let a=0;for(;a<t.length;){if(t[a].hasOwnProperty("isComplete")&&!0!==t[a].isComplete){let o=document.createElement("div"),i=t[a],d=JSON.parse(t[a].category),c=document.createElement("button");c.innerText,c.textContent="Modify",c.addEventListener("click",(()=>{l(i)}));let s=document.createElement("button");s.innerText,s.textContent="Complete",s.addEventListener("click",u);let r=document.createElement("button");r.innerText,r.textContent="Delete",r.addEventListener("click",(()=>{m(r),n()})),o.innerHTML=`<img src="${d.tag}" alt="category tag" class="category-icon"/><div class="title">${t[a].title}</div>\n          <div>Priority: ${t[a].priority}</div><div>Date Due: ${t[a].date}</div>`,o.getElementsByClassName("category-icon")[0].style.backgroundColor=`${d.color}`,o.appendChild(c),o.appendChild(s),o.appendChild(r),o.classList.add("task"),e.appendChild(o)}a++}}else localStorage.getItem("catList")?document.getElementById("content").innerHTML="<h1>No tasks! Get started by going to the 'Add Task' page.":document.getElementById("content").innerHTML="<h1>Welcome! Please begin by adding a category using the 'Add Category' page. Following this, you can add a task using the 'Add Task' page.</h1>"}function a(){d();let e=JSON.parse(localStorage.getItem("taskList"));const t=document.getElementById("content");if(e&&e.length>0){let n=0;for(;n<e.length;){if(1==e[n].isComplete){let o=document.createElement("button");o.innerText,o.textContent="Delete",o.addEventListener("click",(()=>{m(o),a()}));let l=JSON.parse(e[n].category),i=document.createElement("div");i.innerHTML=`<img src="${JSON.parse(e[n].category).tag}" alt="category tag" class="category-icon"/> <div class="title">${e[n].title}</div>\n        ${e[n].priority} ${e[n].date}`,i.classList.add("task-complete"),i.getElementsByClassName("category-icon")[0].style.backgroundColor=`${l.color}`,i.appendChild(o),t.appendChild(i)}n++}}else document.getElementById("content").innerHTML="<h1>No completed tasks! Finish a task to have it display here!"}function o(){document.getElementById("select-dropdown").value="categories",d();let e=JSON.parse(localStorage.getItem("catList"));const t=document.getElementById("content");if(e&&e.length>0){let n=0;for(;n<e.length;){let a=document.createElement("div"),l=document.createElement("img"),i=document.createElement("div"),d=document.createElement("button");d.innerText,d.textContent="Delete",d.addEventListener("click",(()=>{g(d),o()})),c(l,`${e[n].tag}`),l.classList.add("category-icon"),i.innerHTML=`\n      <div class="title">${e[n].title}</div>`,a.classList.add("category"),a.appendChild(l),a.appendChild(i),a.appendChild(d),a.getElementsByClassName("category-icon")[0].style.backgroundColor=`${e[n].color}`,t.appendChild(a),n++}}else document.getElementById("content").innerHTML="<h1>No Categories! Get started by going to the 'Add Category' page."}function l(e){document.getElementById("mod-task-title").value=e.title,document.getElementById("mod-task-prio").value=e.priority,document.getElementById("mod-task-date").value=e.date,document.getElementById("mod-task-category");const t=JSON.parse(localStorage.getItem("catList")),n=document.getElementById("mod-task-category");for(let e=0;e<t.length;e++){const a=document.createElement("option");a.value=JSON.stringify(t[e]),a.textContent=t[e].title,n.appendChild(a)}document.getElementById("modify-form").style.visibility="visible"}function i(){document.getElementById("mod-task-title").value=null,document.getElementById("mod-task-prio").value=null,document.getElementById("mod-task-date").value=null,document.getElementById("mod-task-category").value=null,function(e){let t=e.childElementCount;for(let n=0;n<t;n++)e.removeChild(e.firstElementChild)}(document.getElementById("mod-task-category")),document.getElementById("modify-form").style.visibility="hidden"}function d(){document.getElementById("content").innerHTML=""}function c(e,t){console.log(e.src),e.src=t,e.style.display="block"}class s{constructor(e,t,n,a){this.title=e,this.priority=t,this.date=n,this.category=a,this.isComplete=!1}}class r{constructor(e,t,n){this.title=e,this.color=t,this.tag=`${n}.svg`}}function m(e){let t=JSON.parse(localStorage.getItem("taskList"));for(const n in t)t[n].title==e.parentNode.querySelector(".title").textContent&&t.splice(n,1);e.parentNode.remove(),localStorage.setItem("taskList",JSON.stringify(t))}function g(e){let t=JSON.parse(localStorage.getItem("catList"));for(const n in t)t[n].title==e.parentNode.querySelector(".title").textContent&&t.splice(n,1);e.parentNode.remove(),localStorage.setItem("catList",JSON.stringify(t))}function u(e){let t=JSON.parse(localStorage.getItem("taskList"));for(const n in t)t[n].title==e.target.parentNode.querySelector(".title").textContent&&(t[n].isComplete=!0);localStorage.setItem("taskList",JSON.stringify(t)),n()}window.onload=n();const y=document.getElementById("navAll"),p=document.getElementById("navAddTask"),v=document.getElementById("navAddCat"),E=document.getElementById("navComplete"),k=document.getElementById("navCategories"),I=document.getElementById("select-dropdown"),h=document.getElementById("mod-update");h.addEventListener("click",(()=>{!function(e){let t=JSON.parse(localStorage.getItem("taskList"));const a=e.parentNode.getElementsByClassName("modify-input");for(const n in t)t[n].title==e.parentNode.querySelector("#mod-task-title").value&&(t[n]=new s((o=a)[0].value,o[1].value,o[2].value,o[3].value));var o;localStorage.setItem("taskList",JSON.stringify(t)),n()}(h),i()})),document.getElementById("mod-cancel").addEventListener("click",i),y.addEventListener("click",(()=>{n(),I.value="all"})),p.addEventListener("click",(()=>{e(),I.value="addTask"})),v.addEventListener("click",(()=>{t(),I.value="addCat"})),E.addEventListener("click",(()=>{a(),I.value="completed"})),k.addEventListener("click",(()=>{o(),I.value="categories"})),I.addEventListener("change",(()=>{switch(I.value){case"addTask":e();break;case"all":n();break;case"addCat":t();break;case"completed":a();break;case"categories":o()}}))})();